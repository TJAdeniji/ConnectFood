"use strict";var _authentication_controller=require("./authentication/authentication_controller"),_authentication_model=require("./authentication/authentication_model"),_donor_controller=require("./donor/donor_controller"),_receiver_controller=require("./receiver/receiver_controller"),express=require("express"),session=require("express-session"),pg=require("pg"),http=require("http"),bodyParser=require("body-parser"),path=require("path"),connectionPool=require("./database_help/connection_pool"),app=express(),clientBuildDir=__dirname+"/../../client/dist/";require("dotenv").config({path:__dirname+"/../../.env"}),app.set("port",process.env.NODE_PORT||5e3),app.use(express.static(clientBuildDir)),app.use(bodyParser.json()),app.use(session({secret:"xefbwefiefw",cookie:{maxAge:6e4},resave:!1,saveUninitialized:!1}));var authenticationController=new _authentication_controller.AuthenticationController,authenticationModel=new _authentication_model.AuthenticationModel,donorController=new _donor_controller.DonorController,receeverController=new _receiver_controller.ReceiverController;app.get("/db",function(e,o){connectionPool.connect().then(function(e){e.query("SELECT * FROM test_table;",function(e,n){e?(console.error(e),o.send("Error "+e)):o.send({results:n.rows})}),e.query("SELECT * FROM test_table;").then(function(o){e.done(),console.log(o.rows[0])}).catch(function(n){e.done(),console.error("query error",n.message,n.stack),o.send("Error "+n)})}).catch(function(e){console.error("query error",e.message,e.stack),o.send("Error "+e)})}),app.post("/authentication/login",authenticationController.login.bind(authenticationController)),app.post("/authentication/signup",authenticationController.signup.bind(authenticationController)),app.post("/authentication/logout",authenticationController.logout.bind(authenticationController)),app.post("/donor/addFoodListing",donorController.addFoodListing.bind(donorController)),app.get("*",function(e,o){console.log(process.env.DATABASE_URL),o.sendFile(path.join(clientBuildDir+"/index.html"))}),app.listen(app.get("port"),function(){console.log("Node app is running on port",app.get("port"))});
//# sourceMappingURL=server.js.map
