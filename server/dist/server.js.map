{"version":3,"names":[],"mappings":"","sources":["server.js"],"sourcesContent":["\"use strict\";var _authentication_controller=require(\"./authentication/authentication_controller\"),_donor_controller=require(\"./donor/donor_controller\"),_receiver_controller=require(\"./receiver/receiver_controller\"),express=require(\"express\"),session=require(\"express-session\"),pg=require(\"pg\"),http=require(\"http\"),bodyParser=require(\"body-parser\"),path=require(\"path\"),connectionPool=require(\"./database_help/connection_pool\"),app=express(),clientBuildDir=__dirname+\"/../../client/dist/\";require(\"dotenv\").config({path:__dirname+\"/../../.env\"}),app.set(\"port\",process.env.NODE_PORT||5e3),app.set(\"connectionPool\",connectionPool),app.use(express.static(clientBuildDir)),app.use(bodyParser.json()),app.use(session({secret:\"xefbwefiefw\",cookie:{maxAge:6e4},resave:!1,saveUninitialized:!1}));var authenticationController=new _authentication_controller.AuthenticationController,donorController=new _donor_controller.DonorController,receeverController=new _receiver_controller.ReceiverController;app.get(\"/db\",function(e,o){connectionPool.connect().then(function(e){e.query(\"SELECT * FROM test_table;\",function(e,r){e?(console.error(e),o.send(\"Error \"+e)):o.send({results:r.rows})}),e.query(\"SELECT * FROM test_table;\").then(function(o){e.done(),console.log(o.rows[0])}).catch(function(r){e.done(),console.error(\"query error\",r.message,r.stack),o.send(\"Error \"+r)})}).catch(function(e){console.error(\"query error\",e.message,e.stack),o.send(\"Error \"+e)})}),app.post(\"/login\",authenticationController.login),app.post(\"/addFoodListings\"),app.get(\"*\",function(e,o){console.log(process.env.DATABASE_URL),o.sendFile(path.join(clientBuildDir+\"/index.html\"))}),app.listen(app.get(\"port\"),function(){console.log(\"Node app is running on port\",app.get(\"port\"))});"],"file":"server.js","sourceRoot":"/source/"}